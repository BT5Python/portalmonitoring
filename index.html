<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TERMINAL ‚Äî MONITORING</title>

<style>

@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

:root {
  --hack: #00ff00;
}

body {
  margin:0;
  background:#000;
  color:var(--hack);
  font-family:'Share Tech Mono', monospace;
  font-size:14px;
  overflow:hidden;
}

/* terminal area */
#console {
  height:100vh;
  padding:20px;
  white-space:pre-line;
  overflow-y:auto;
  line-height:1.4;
}

/* cursor */
.cursor {
  display:inline-block;
  width:10px;
  height:16px;
  background:var(--hack);
  animation:blink .5s infinite;
}
@keyframes blink {
  0%,49%{ opacity:1 }
  50%,100%{ opacity:0 }
}

</style>

</head>
<body>

<div id="console"></div>
<div class="cursor"></div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>

/* ============================================================
   ‚ö†Ô∏è SETTING PALING PENTING ‚Äî ISI BARIS INI SAJA !!!
   ============================================================ */

const DB_URL = "https://portalmonitoring-a0926-default-rtdb.asia-southeast1.firebasedatabase.app";  
// contoh: https://monitor-01-default-rtdb.firebaseio.com

/* ============================================================ */

firebase.initializeApp({ databaseURL: DB_URL });

const consoleDiv = document.getElementById("console");

function log(msg){
  consoleDiv.innerHTML += msg + "\n";
  consoleDiv.scrollTop = consoleDiv.scrollHeight;
}

/* Boot message */
log("> INITIALIZING TERMINAL...");
log("> CONNECTING DATABASE...");
log("");


/* LISTEN ACTIVE PAGES LISTENER */
firebase.database().ref("activePages").on("value", snap => {
  const data = snap.val();

  if(!data){
    log("[SYS] No signal detected...");
    return;
  }

  const time = new Date().toLocaleTimeString("id-ID");

  Object.entries(data).forEach(([name,status])=>{
    if(status){
      log(`[${time}] üî• ONLINE ‚Äî ${name}`);
    } else {
      log(`[${time}] ‚ùå OFFLINE ‚Äî ${name}`);
    }
  });
});

</script>

</body>
</html>
